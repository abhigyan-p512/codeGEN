{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abhig\\\\OneDrive\\\\Desktop\\\\leetclone\\\\client\\\\src\\\\pages\\\\TeamBattleRoomPage.js\",\n  _s = $RefreshSig$();\n// src/pages/TeamBattleRoomPage.js\nimport React, { useEffect, useState, useMemo } from \"react\";\nimport axios from \"axios\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { io } from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:5000\";\nlet socket;\nfunction TeamBattleRoomPage() {\n  _s();\n  var _battle$teamA, _battle$teamA$team, _battle$teamB, _battle$teamB$team, _battle$teamA2, _battle$teamA2$team, _battle$teamB2, _battle$teamB2$team, _battle$problems, _battle$teamA3, _battle$teamA3$team, _battle$teamA4, _battle$teamA5, _battle$teamB3, _battle$teamB3$team, _battle$teamB4, _battle$teamB5, _battle$participants;\n  const {\n    battleId\n  } = useParams();\n  const {\n    user,\n    token\n  } = useAuth();\n  const navigate = useNavigate();\n  const [battle, setBattle] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [timeLeft, setTimeLeft] = useState(null);\n  useEffect(() => {\n    if (!user) navigate(\"/login\");\n  }, [user, navigate]);\n\n  // fetch battle info\n  useEffect(() => {\n    if (!token || !battleId) return;\n    async function fetchBattle() {\n      try {\n        setLoading(true);\n        const res = await axios.get(`${API_URL}/team-battles/${battleId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setBattle(res.data);\n      } catch (err) {\n        var _err$response, _err$response$data;\n        console.error(\"Fetch battle error:\", err);\n        setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Failed to load team battle room.\");\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchBattle();\n  }, [battleId, token]);\n\n  // socket: join room + listen for score updates\n  useEffect(() => {\n    if (!battleId || !user) return;\n    socket = io(API_URL, {\n      transports: [\"websocket\"]\n    });\n    socket.emit(\"join_team_battle\", {\n      battleId\n    });\n    socket.on(\"team-battle:score-update\", payload => {\n      if (payload.battleId === battleId) {\n        setBattle(prev => prev ? {\n          ...prev,\n          teamA: payload.teamA || prev.teamA,\n          teamB: payload.teamB || prev.teamB,\n          // payload.participants might NOT have user object -> still accept\n          participants: payload.participants || prev.participants\n        } : prev);\n      }\n    });\n    return () => {\n      if (socket) socket.disconnect();\n    };\n  }, [battleId, user]);\n\n  // countdown timer\n  useEffect(() => {\n    if (!battle || !battle.startTime || !battle.timeLimitSeconds) {\n      setTimeLeft(null);\n      return;\n    }\n    const start = new Date(battle.startTime).getTime();\n    const end = start + battle.timeLimitSeconds * 1000;\n    function tick() {\n      const now = Date.now();\n      const remaining = Math.max(0, Math.floor((end - now) / 1000));\n      setTimeLeft(remaining);\n    }\n    tick();\n    const id = setInterval(tick, 1000);\n    return () => clearInterval(id);\n  }, [battle]);\n  const formattedTimeLeft = useMemo(() => {\n    if (timeLeft == null) return \"--:--\";\n    const mm = String(Math.floor(timeLeft / 60)).padStart(2, \"0\");\n    const ss = String(timeLeft % 60).padStart(2, \"0\");\n    return `${mm}:${ss}`;\n  }, [timeLeft]);\n  if (!user) return null;\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-card\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"page-muted\",\n          children: \"Loading battle...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this);\n  }\n  if (error || !battle) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"page-heading\",\n          children: \"Team Battle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"page-error\",\n          children: error || \"Battle not found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this);\n  }\n  const isFinished = battle.status === \"finished\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"page-heading\",\n            children: \"Team Battle Room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"page-subtitle\",\n            children: [\"Battle between\", \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: ((_battle$teamA = battle.teamA) === null || _battle$teamA === void 0 ? void 0 : (_battle$teamA$team = _battle$teamA.team) === null || _battle$teamA$team === void 0 ? void 0 : _battle$teamA$team.name) || \"Team A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), \" and\", \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: ((_battle$teamB = battle.teamB) === null || _battle$teamB === void 0 ? void 0 : (_battle$teamB$team = _battle$teamB.team) === null || _battle$teamB$team === void 0 ? void 0 : _battle$teamB$team.name) || \"Team B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"battle-timer-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auth-label\",\n            children: \"Time left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"battle-timer-value\",\n            children: formattedTimeLeft\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), isFinished && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"battle-result-banner\",\n        children: [battle.winner === \"draw\" && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Result: It's a draw!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 42\n        }, this), battle.winner === \"A\" && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Winner: \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: ((_battle$teamA2 = battle.teamA) === null || _battle$teamA2 === void 0 ? void 0 : (_battle$teamA2$team = _battle$teamA2.team) === null || _battle$teamA2$team === void 0 ? void 0 : _battle$teamA2$team.name) || \"Team A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 15\n        }, this), battle.winner === \"B\" && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Winner: \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: ((_battle$teamB2 = battle.teamB) === null || _battle$teamB2 === void 0 ? void 0 : (_battle$teamB2$team = _battle$teamB2.team) === null || _battle$teamB2$team === void 0 ? void 0 : _battle$teamB2$team.name) || \"Team B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"battle-layout\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"battle-problems-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"section-title\",\n            children: \"Problems\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), ((_battle$problems = battle.problems) === null || _battle$problems === void 0 ? void 0 : _battle$problems.length) === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"page-muted\",\n            children: \"No problems.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"battle-problems-list\",\n            children: battle.problems.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"battle-problem-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"battle-problem-title\",\n                  children: p.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 23\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip chip-small\",\n                  children: p.difficulty\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary btn-sm\",\n                onClick: () => navigate(`/problems/${p.slug}`, {\n                  state: {\n                    battleId: battle._id\n                  }\n                }),\n                children: \"Open\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 21\n              }, this)]\n            }, p._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"battle-scoreboard-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"section-title\",\n            children: \"Scoreboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"team-score-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"team-score-card team-score-card-a\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"team-score-name\",\n                children: ((_battle$teamA3 = battle.teamA) === null || _battle$teamA3 === void 0 ? void 0 : (_battle$teamA3$team = _battle$teamA3.team) === null || _battle$teamA3$team === void 0 ? void 0 : _battle$teamA3$team.name) || \"Team A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"team-score-main\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"team-score-label\",\n                  children: \"Score\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"team-score-value\",\n                  children: ((_battle$teamA4 = battle.teamA) === null || _battle$teamA4 === void 0 ? void 0 : _battle$teamA4.score) || 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"team-score-meta\",\n                children: [\"Solved: \", ((_battle$teamA5 = battle.teamA) === null || _battle$teamA5 === void 0 ? void 0 : _battle$teamA5.solved) || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"team-score-card team-score-card-b\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"team-score-name\",\n                children: ((_battle$teamB3 = battle.teamB) === null || _battle$teamB3 === void 0 ? void 0 : (_battle$teamB3$team = _battle$teamB3.team) === null || _battle$teamB3$team === void 0 ? void 0 : _battle$teamB3$team.name) || \"Team B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"team-score-main\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"team-score-label\",\n                  children: \"Score\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"team-score-value\",\n                  children: ((_battle$teamB4 = battle.teamB) === null || _battle$teamB4 === void 0 ? void 0 : _battle$teamB4.score) || 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"team-score-meta\",\n                children: [\"Solved: \", ((_battle$teamB5 = battle.teamB) === null || _battle$teamB5 === void 0 ? void 0 : _battle$teamB5.solved) || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"section-title\",\n            style: {\n              marginTop: \"1.5rem\"\n            },\n            children: \"Members\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"battle-members-list\",\n            children: (_battle$participants = battle.participants) === null || _battle$participants === void 0 ? void 0 : _battle$participants.map((p, idx) => {\n              var _p$score, _p$solved;\n              // p.user may be null or just an id when coming from socket\n              const userObj = p.user && typeof p.user === \"object\" ? p.user : null;\n              const username = (userObj === null || userObj === void 0 ? void 0 : userObj.username) || p.username || `Player ${idx + 1}`;\n              const key = (userObj === null || userObj === void 0 ? void 0 : userObj._id) || p._id || `${p.teamSide || \"X\"}-${idx}`;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `battle-member-card ${p.teamSide === \"A\" ? \"battle-member-a\" : \"battle-member-b\"}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"battle-member-name\",\n                  children: [username, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"chip chip-small\",\n                    children: [\"Team \", p.teamSide || \"?\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"battle-member-stats\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Score: \", (_p$score = p.score) !== null && _p$score !== void 0 ? _p$score : 0]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Solved: \", (_p$solved = p.solved) !== null && _p$solved !== void 0 ? _p$solved : 0]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 21\n                }, this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 5\n  }, this);\n}\n_s(TeamBattleRoomPage, \"Na6H28QbU7orMBuE8UoHjU0Irog=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = TeamBattleRoomPage;\nexport default TeamBattleRoomPage;\nvar _c;\n$RefreshReg$(_c, \"TeamBattleRoomPage\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","axios","useParams","useNavigate","useAuth","io","jsxDEV","_jsxDEV","API_URL","socket","TeamBattleRoomPage","_s","_battle$teamA","_battle$teamA$team","_battle$teamB","_battle$teamB$team","_battle$teamA2","_battle$teamA2$team","_battle$teamB2","_battle$teamB2$team","_battle$problems","_battle$teamA3","_battle$teamA3$team","_battle$teamA4","_battle$teamA5","_battle$teamB3","_battle$teamB3$team","_battle$teamB4","_battle$teamB5","_battle$participants","battleId","user","token","navigate","battle","setBattle","loading","setLoading","error","setError","timeLeft","setTimeLeft","fetchBattle","res","get","headers","Authorization","data","err","_err$response","_err$response$data","console","response","message","transports","emit","on","payload","prev","teamA","teamB","participants","disconnect","startTime","timeLimitSeconds","start","Date","getTime","end","tick","now","remaining","Math","max","floor","id","setInterval","clearInterval","formattedTimeLeft","mm","String","padStart","ss","className","children","fileName","_jsxFileName","lineNumber","columnNumber","isFinished","status","team","name","winner","problems","length","map","p","title","difficulty","onClick","slug","state","_id","score","solved","style","marginTop","idx","_p$score","_p$solved","userObj","username","key","teamSide","_c","$RefreshReg$"],"sources":["C:/Users/abhig/OneDrive/Desktop/leetclone/client/src/pages/TeamBattleRoomPage.js"],"sourcesContent":["// src/pages/TeamBattleRoomPage.js\r\nimport React, { useEffect, useState, useMemo } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nconst API_URL = \"http://localhost:5000\";\r\n\r\nlet socket;\r\n\r\nfunction TeamBattleRoomPage() {\r\n  const { battleId } = useParams();\r\n  const { user, token } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [battle, setBattle] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [timeLeft, setTimeLeft] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!user) navigate(\"/login\");\r\n  }, [user, navigate]);\r\n\r\n  // fetch battle info\r\n  useEffect(() => {\r\n    if (!token || !battleId) return;\r\n\r\n    async function fetchBattle() {\r\n      try {\r\n        setLoading(true);\r\n        const res = await axios.get(`${API_URL}/team-battles/${battleId}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setBattle(res.data);\r\n      } catch (err) {\r\n        console.error(\"Fetch battle error:\", err);\r\n        setError(\r\n          err.response?.data?.message || \"Failed to load team battle room.\"\r\n        );\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    fetchBattle();\r\n  }, [battleId, token]);\r\n\r\n  // socket: join room + listen for score updates\r\n  useEffect(() => {\r\n    if (!battleId || !user) return;\r\n\r\n    socket = io(API_URL, {\r\n      transports: [\"websocket\"],\r\n    });\r\n\r\n    socket.emit(\"join_team_battle\", { battleId });\r\n\r\n    socket.on(\"team-battle:score-update\", (payload) => {\r\n      if (payload.battleId === battleId) {\r\n        setBattle((prev) =>\r\n          prev\r\n            ? {\r\n                ...prev,\r\n                teamA: payload.teamA || prev.teamA,\r\n                teamB: payload.teamB || prev.teamB,\r\n                // payload.participants might NOT have user object -> still accept\r\n                participants: payload.participants || prev.participants,\r\n              }\r\n            : prev\r\n        );\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      if (socket) socket.disconnect();\r\n    };\r\n  }, [battleId, user]);\r\n\r\n  // countdown timer\r\n  useEffect(() => {\r\n    if (!battle || !battle.startTime || !battle.timeLimitSeconds) {\r\n      setTimeLeft(null);\r\n      return;\r\n    }\r\n\r\n    const start = new Date(battle.startTime).getTime();\r\n    const end = start + battle.timeLimitSeconds * 1000;\r\n\r\n    function tick() {\r\n      const now = Date.now();\r\n      const remaining = Math.max(0, Math.floor((end - now) / 1000));\r\n      setTimeLeft(remaining);\r\n    }\r\n\r\n    tick();\r\n    const id = setInterval(tick, 1000);\r\n    return () => clearInterval(id);\r\n  }, [battle]);\r\n\r\n  const formattedTimeLeft = useMemo(() => {\r\n    if (timeLeft == null) return \"--:--\";\r\n    const mm = String(Math.floor(timeLeft / 60)).padStart(2, \"0\");\r\n    const ss = String(timeLeft % 60).padStart(2, \"0\");\r\n    return `${mm}:${ss}`;\r\n  }, [timeLeft]);\r\n\r\n  if (!user) return null;\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"page-container\">\r\n        <div className=\"page-card\">\r\n          <p className=\"page-muted\">Loading battle...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !battle) {\r\n    return (\r\n      <div className=\"page-container\">\r\n        <div className=\"page-card\">\r\n          <h1 className=\"page-heading\">Team Battle</h1>\r\n          <p className=\"page-error\">{error || \"Battle not found.\"}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const isFinished = battle.status === \"finished\";\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      <div className=\"page-card\">\r\n        <div className=\"page-header\">\r\n          <div>\r\n            <h1 className=\"page-heading\">Team Battle Room</h1>\r\n            <p className=\"page-subtitle\">\r\n              Battle between{\" \"}\r\n              <b>{battle.teamA?.team?.name || \"Team A\"}</b> and{\" \"}\r\n              <b>{battle.teamB?.team?.name || \"Team B\"}</b>.\r\n            </p>\r\n          </div>\r\n          <div className=\"battle-timer-box\">\r\n            <div className=\"auth-label\">Time left</div>\r\n            <div className=\"battle-timer-value\">{formattedTimeLeft}</div>\r\n          </div>\r\n        </div>\r\n\r\n        {isFinished && (\r\n          <div className=\"battle-result-banner\">\r\n            {battle.winner === \"draw\" && <span>Result: It&apos;s a draw!</span>}\r\n            {battle.winner === \"A\" && (\r\n              <span>\r\n                Winner: <b>{battle.teamA?.team?.name || \"Team A\"}</b>\r\n              </span>\r\n            )}\r\n            {battle.winner === \"B\" && (\r\n              <span>\r\n                Winner: <b>{battle.teamB?.team?.name || \"Team B\"}</b>\r\n              </span>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"battle-layout\">\r\n          {/* Problems panel */}\r\n          <div className=\"battle-problems-panel\">\r\n            <h3 className=\"section-title\">Problems</h3>\r\n            {battle.problems?.length === 0 ? (\r\n              <p className=\"page-muted\">No problems.</p>\r\n            ) : (\r\n              <div className=\"battle-problems-list\">\r\n                {battle.problems.map((p) => (\r\n                  <div key={p._id} className=\"battle-problem-item\">\r\n                    <div>\r\n                      <span className=\"battle-problem-title\">{p.title}</span>{\" \"}\r\n                      <span className=\"chip chip-small\">{p.difficulty}</span>\r\n                    </div>\r\n                    <button\r\n                      className=\"btn btn-secondary btn-sm\"\r\n                      onClick={() =>\r\n                        navigate(`/problems/${p.slug}`, {\r\n                          state: { battleId: battle._id },\r\n                        })\r\n                      }\r\n                    >\r\n                      Open\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Scoreboard */}\r\n          <div className=\"battle-scoreboard-panel\">\r\n            <h3 className=\"section-title\">Scoreboard</h3>\r\n            <div className=\"team-score-row\">\r\n              <div className=\"team-score-card team-score-card-a\">\r\n                <div className=\"team-score-name\">\r\n                  {battle.teamA?.team?.name || \"Team A\"}\r\n                </div>\r\n                <div className=\"team-score-main\">\r\n                  <span className=\"team-score-label\">Score</span>\r\n                  <span className=\"team-score-value\">\r\n                    {battle.teamA?.score || 0}\r\n                  </span>\r\n                </div>\r\n                <div className=\"team-score-meta\">\r\n                  Solved: {battle.teamA?.solved || 0}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"team-score-card team-score-card-b\">\r\n                <div className=\"team-score-name\">\r\n                  {battle.teamB?.team?.name || \"Team B\"}\r\n                </div>\r\n                <div className=\"team-score-main\">\r\n                  <span className=\"team-score-label\">Score</span>\r\n                  <span className=\"team-score-value\">\r\n                    {battle.teamB?.score || 0}\r\n                  </span>\r\n                </div>\r\n                <div className=\"team-score-meta\">\r\n                  Solved: {battle.teamB?.solved || 0}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <h4 className=\"section-title\" style={{ marginTop: \"1.5rem\" }}>\r\n              Members\r\n            </h4>\r\n            <div className=\"battle-members-list\">\r\n              {battle.participants?.map((p, idx) => {\r\n                // p.user may be null or just an id when coming from socket\r\n                const userObj = p.user && typeof p.user === \"object\" ? p.user : null;\r\n                const username =\r\n                  userObj?.username ||\r\n                  p.username ||\r\n                  `Player ${idx + 1}`;\r\n                const key =\r\n                  userObj?._id || p._id || `${p.teamSide || \"X\"}-${idx}`;\r\n\r\n                return (\r\n                  <div\r\n                    key={key}\r\n                    className={`battle-member-card ${\r\n                      p.teamSide === \"A\"\r\n                        ? \"battle-member-a\"\r\n                        : \"battle-member-b\"\r\n                    }`}\r\n                  >\r\n                    <div className=\"battle-member-name\">\r\n                      {username}{\" \"}\r\n                      <span className=\"chip chip-small\">\r\n                        Team {p.teamSide || \"?\"}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"battle-member-stats\">\r\n                      <span>Score: {p.score ?? 0}</span>\r\n                      <span>Solved: {p.solved ?? 0}</span>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TeamBattleRoomPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}