{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abhig\\\\OneDrive\\\\Desktop\\\\leetclone\\\\client\\\\src\\\\pages\\\\ContestPage.js\",\n  _s = $RefreshSig$();\n// src/pages/ContestPage.js\nimport { useEffect, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:5000\";\nfunction ContestPage() {\n  _s();\n  var _contest$participants;\n  const {\n    id\n  } = useParams(); // contest id\n  const {\n    user,\n    token\n  } = useAuth();\n  const [contest, setContest] = useState(null);\n  const [leaderboard, setLeaderboard] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [joinMessage, setJoinMessage] = useState(\"\");\n  const [joined, setJoined] = useState(false);\n  const [loadingLeaderboard, setLoadingLeaderboard] = useState(false);\n\n  // chat\n  const [chatMessages, setChatMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [loadingChat, setLoadingChat] = useState(false);\n\n  // Fetch contest details (with participants & problems)\n  useEffect(() => {\n    async function fetchContest() {\n      try {\n        const res = await axios.get(`${API_URL}/contests/${id}`);\n        const data = res.data;\n        setContest(data);\n        if (user && data.participants) {\n          const userId = user.id || user._id;\n          const isJoined = data.participants.some(p => p._id === userId);\n          setJoined(isJoined);\n        }\n      } catch (err) {\n        console.error(\"Contest load error:\", err);\n        setError(\"Failed to load contest\");\n      }\n    }\n    fetchContest();\n  }, [id, user]);\n\n  // Fetch leaderboard (+ polling)\n  useEffect(() => {\n    if (!token) return;\n    let intervalId;\n    async function fetchLeaderboard() {\n      try {\n        setLoadingLeaderboard(true);\n        const res = await axios.get(`${API_URL}/contests/${id}/leaderboard`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setLeaderboard(res.data || []);\n      } catch (err) {\n        console.error(\"Leaderboard fetch error:\", err);\n      } finally {\n        setLoadingLeaderboard(false);\n      }\n    }\n    fetchLeaderboard();\n    intervalId = setInterval(fetchLeaderboard, 10000);\n    return () => clearInterval(intervalId);\n  }, [id, token]);\n\n  // Fetch chat messages\n  useEffect(() => {\n    if (!token) return;\n    let intervalId;\n    async function fetchChat() {\n      try {\n        setLoadingChat(true);\n        const res = await axios.get(`${API_URL}/contests/${id}/chat?limit=50`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setChatMessages(res.data || []);\n      } catch (err) {\n        console.error(\"Chat fetch error:\", err);\n      } finally {\n        setLoadingChat(false);\n      }\n    }\n    fetchChat();\n    intervalId = setInterval(fetchChat, 3000);\n    return () => clearInterval(intervalId);\n  }, [id, token]);\n  async function handleJoin() {\n    if (!token) {\n      setJoinMessage(\"You must be logged in to join this contest.\");\n      return;\n    }\n    try {\n      const res = await axios.post(`${API_URL}/contests/${id}/join`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setJoinMessage(res.data.message || \"Joined contest\");\n      setJoined(true);\n      const updated = await axios.get(`${API_URL}/contests/${id}`);\n      setContest(updated.data);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Join error:\", err);\n      setJoinMessage(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Failed to join contest\");\n    }\n  }\n  async function handleSendMessage(e) {\n    e.preventDefault();\n    if (!token || !newMessage.trim()) return;\n    try {\n      const res = await axios.post(`${API_URL}/contests/${id}/chat`, {\n        message: newMessage\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setNewMessage(\"\");\n      setChatMessages(prev => [...prev, res.data]);\n    } catch (err) {\n      console.error(\"Chat send error:\", err);\n    }\n  }\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"page-error\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 21\n  }, this);\n  if (!contest) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"page-muted\",\n    children: \"Loading contest...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 24\n  }, this);\n  const now = new Date();\n  const start = new Date(contest.startTime);\n  const end = new Date(contest.endTime);\n  const isActive = now >= start && now <= end;\n  const isUpcoming = now < start;\n  const isFinished = now > end;\n  const status = isActive ? \"Running\" : isUpcoming ? \"Upcoming\" : \"Finished\";\n  const statusClass = s => {\n    switch (s) {\n      case \"Running\":\n        return \"contest-status-pill status-running\";\n      case \"Upcoming\":\n        return \"contest-status-pill status-upcoming\";\n      case \"Finished\":\n        return \"contest-status-pill status-finished\";\n      default:\n        return \"contest-status-pill\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-card contest-info-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contest-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"page-heading\",\n            style: {\n              marginBottom: 4\n            },\n            children: contest.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), contest.description && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"page-subtitle\",\n            children: contest.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"contest-header-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: statusClass(status),\n            children: status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleJoin,\n            disabled: joined,\n            className: \"btn btn-primary\",\n            children: joined ? \"Joined\" : \"Join Contest\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), joinMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: joinMessage.toLowerCase().includes(\"fail\") ? \"page-error\" : \"page-muted\",\n        style: {\n          marginTop: 6\n        },\n        children: joinMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contest-times\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"contest-meta-label\",\n            children: \"Start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"contest-meta-value\",\n            children: start.toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"contest-meta-label\",\n            children: \"End\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"contest-meta-value\",\n            children: end.toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"contest-meta-label\",\n            children: \"Participants\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"contest-meta-value\",\n            children: ((_contest$participants = contest.participants) === null || _contest$participants === void 0 ? void 0 : _contest$participants.length) || 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contest-main-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"section-title\",\n          children: \"Problems\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), contest.problems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"page-muted\",\n          children: \"No problems in this contest yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"contest-problem-list\",\n          children: contest.problems.map(cp => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"contest-problem-item\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `/contests/${contest._id}/problems/${cp.problem.slug}`,\n              children: [cp.problem.title, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"chip chip-small\",\n                children: cp.problem.difficulty\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this)\n          }, cp.problem._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"section-title\",\n          style: {\n            marginTop: \"1.5rem\"\n          },\n          children: \"Participants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), contest.participants && contest.participants.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"participants-list\",\n          children: contest.participants.map(p => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"chip\",\n            children: p.username\n          }, p._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"page-muted\",\n          children: \"No participants yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-card leaderboard-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leaderboard-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"section-title\",\n            children: \"Leaderboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), loadingLeaderboard && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"page-muted\",\n            style: {\n              fontSize: \"0.8rem\"\n            },\n            children: \"refreshing...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), leaderboard.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"page-muted\",\n          children: \"No submissions yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leaderboard-table-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"leaderboard-table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Rank\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"User\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Score\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Solved\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: leaderboard.map((row, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: index + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: row.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: row.score\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: row.solvedCount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 23\n                }, this)]\n              }, row.userId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-card contest-chat-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"leaderboard-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"section-title\",\n          children: \"Contest Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), !user && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"page-muted\",\n          style: {\n            fontSize: \"0.8rem\"\n          },\n          children: \"Login to participate in chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-messages\",\n          children: [loadingChat && chatMessages.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"page-muted\",\n            children: \"Loading chat...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 17\n          }, this), chatMessages.length === 0 && !loadingChat && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"page-muted\",\n            children: \"No messages yet. Be the first to say hi \\uD83D\\uDC4B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 17\n          }, this), chatMessages.map(msg => {\n            var _msg$user;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-message\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"chat-username\",\n                children: ((_msg$user = msg.user) === null || _msg$user === void 0 ? void 0 : _msg$user.username) || \"User\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"chat-text\",\n                children: msg.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"chat-time\",\n                children: new Date(msg.createdAt).toLocaleTimeString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 19\n              }, this)]\n            }, msg._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSendMessage,\n          className: \"chat-input-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: newMessage,\n            onChange: e => setNewMessage(e.target.value),\n            className: \"input-control\",\n            placeholder: \"Type a message...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"page-muted\",\n        children: \"Login to view and send messages.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this);\n}\n_s(ContestPage, \"A8j0TFEsYkuXNT6IPOsvb9pc2ek=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = ContestPage;\nexport default ContestPage;\nvar _c;\n$RefreshReg$(_c, \"ContestPage\");","map":{"version":3,"names":["useEffect","useState","useParams","Link","axios","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","ContestPage","_s","_contest$participants","id","user","token","contest","setContest","leaderboard","setLeaderboard","error","setError","joinMessage","setJoinMessage","joined","setJoined","loadingLeaderboard","setLoadingLeaderboard","chatMessages","setChatMessages","newMessage","setNewMessage","loadingChat","setLoadingChat","fetchContest","res","get","data","participants","userId","_id","isJoined","some","p","err","console","intervalId","fetchLeaderboard","headers","Authorization","setInterval","clearInterval","fetchChat","handleJoin","post","message","updated","_err$response","_err$response$data","response","handleSendMessage","e","preventDefault","trim","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","now","Date","start","startTime","end","endTime","isActive","isUpcoming","isFinished","status","statusClass","s","style","marginBottom","name","description","onClick","disabled","toLowerCase","includes","marginTop","toLocaleString","length","problems","map","cp","to","problem","slug","title","difficulty","username","fontSize","row","index","score","solvedCount","msg","_msg$user","createdAt","toLocaleTimeString","onSubmit","type","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/abhig/OneDrive/Desktop/leetclone/client/src/pages/ContestPage.js"],"sourcesContent":["// src/pages/ContestPage.js\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\n\r\nconst API_URL = \"http://localhost:5000\";\r\n\r\nfunction ContestPage() {\r\n  const { id } = useParams(); // contest id\r\n  const { user, token } = useAuth();\r\n\r\n  const [contest, setContest] = useState(null);\r\n  const [leaderboard, setLeaderboard] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n  const [joinMessage, setJoinMessage] = useState(\"\");\r\n  const [joined, setJoined] = useState(false);\r\n\r\n  const [loadingLeaderboard, setLoadingLeaderboard] = useState(false);\r\n\r\n  // chat\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [loadingChat, setLoadingChat] = useState(false);\r\n\r\n  // Fetch contest details (with participants & problems)\r\n  useEffect(() => {\r\n    async function fetchContest() {\r\n      try {\r\n        const res = await axios.get(`${API_URL}/contests/${id}`);\r\n        const data = res.data;\r\n        setContest(data);\r\n\r\n        if (user && data.participants) {\r\n          const userId = user.id || user._id;\r\n          const isJoined = data.participants.some((p) => p._id === userId);\r\n          setJoined(isJoined);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Contest load error:\", err);\r\n        setError(\"Failed to load contest\");\r\n      }\r\n    }\r\n    fetchContest();\r\n  }, [id, user]);\r\n\r\n  // Fetch leaderboard (+ polling)\r\n  useEffect(() => {\r\n    if (!token) return;\r\n\r\n    let intervalId;\r\n\r\n    async function fetchLeaderboard() {\r\n      try {\r\n        setLoadingLeaderboard(true);\r\n        const res = await axios.get(`${API_URL}/contests/${id}/leaderboard`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setLeaderboard(res.data || []);\r\n      } catch (err) {\r\n        console.error(\"Leaderboard fetch error:\", err);\r\n      } finally {\r\n        setLoadingLeaderboard(false);\r\n      }\r\n    }\r\n\r\n    fetchLeaderboard();\r\n    intervalId = setInterval(fetchLeaderboard, 10000);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [id, token]);\r\n\r\n  // Fetch chat messages\r\n  useEffect(() => {\r\n    if (!token) return;\r\n\r\n    let intervalId;\r\n\r\n    async function fetchChat() {\r\n      try {\r\n        setLoadingChat(true);\r\n        const res = await axios.get(`${API_URL}/contests/${id}/chat?limit=50`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setChatMessages(res.data || []);\r\n      } catch (err) {\r\n        console.error(\"Chat fetch error:\", err);\r\n      } finally {\r\n        setLoadingChat(false);\r\n      }\r\n    }\r\n\r\n    fetchChat();\r\n    intervalId = setInterval(fetchChat, 3000);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [id, token]);\r\n\r\n  async function handleJoin() {\r\n    if (!token) {\r\n      setJoinMessage(\"You must be logged in to join this contest.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        `${API_URL}/contests/${id}/join`,\r\n        {},\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setJoinMessage(res.data.message || \"Joined contest\");\r\n      setJoined(true);\r\n\r\n      const updated = await axios.get(`${API_URL}/contests/${id}`);\r\n      setContest(updated.data);\r\n    } catch (err) {\r\n      console.error(\"Join error:\", err);\r\n      setJoinMessage(err.response?.data?.message || \"Failed to join contest\");\r\n    }\r\n  }\r\n\r\n  async function handleSendMessage(e) {\r\n    e.preventDefault();\r\n    if (!token || !newMessage.trim()) return;\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        `${API_URL}/contests/${id}/chat`,\r\n        { message: newMessage },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setNewMessage(\"\");\r\n      setChatMessages((prev) => [...prev, res.data]);\r\n    } catch (err) {\r\n      console.error(\"Chat send error:\", err);\r\n    }\r\n  }\r\n\r\n  if (error) return <p className=\"page-error\">{error}</p>;\r\n  if (!contest) return <p className=\"page-muted\">Loading contest...</p>;\r\n\r\n  const now = new Date();\r\n  const start = new Date(contest.startTime);\r\n  const end = new Date(contest.endTime);\r\n\r\n  const isActive = now >= start && now <= end;\r\n  const isUpcoming = now < start;\r\n  const isFinished = now > end;\r\n\r\n  const status = isActive ? \"Running\" : isUpcoming ? \"Upcoming\" : \"Finished\";\r\n\r\n  const statusClass = (s) => {\r\n    switch (s) {\r\n      case \"Running\":\r\n        return \"contest-status-pill status-running\";\r\n      case \"Upcoming\":\r\n        return \"contest-status-pill status-upcoming\";\r\n      case \"Finished\":\r\n        return \"contest-status-pill status-finished\";\r\n      default:\r\n        return \"contest-status-pill\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      {/* Contest info card */}\r\n      <div className=\"page-card contest-info-card\">\r\n        <div className=\"contest-header\">\r\n          <div>\r\n            <h1 className=\"page-heading\" style={{ marginBottom: 4 }}>\r\n              {contest.name}\r\n            </h1>\r\n            {contest.description && (\r\n              <p className=\"page-subtitle\">{contest.description}</p>\r\n            )}\r\n          </div>\r\n          <div className=\"contest-header-right\">\r\n            <span className={statusClass(status)}>{status}</span>\r\n            <button\r\n              onClick={handleJoin}\r\n              disabled={joined}\r\n              className=\"btn btn-primary\"\r\n            >\r\n              {joined ? \"Joined\" : \"Join Contest\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {joinMessage && (\r\n          <p\r\n            className={\r\n              joinMessage.toLowerCase().includes(\"fail\") ? \"page-error\" : \"page-muted\"\r\n            }\r\n            style={{ marginTop: 6 }}\r\n          >\r\n            {joinMessage}\r\n          </p>\r\n        )}\r\n\r\n        <div className=\"contest-times\">\r\n          <div>\r\n            <span className=\"contest-meta-label\">Start</span>\r\n            <span className=\"contest-meta-value\">\r\n              {start.toLocaleString()}\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <span className=\"contest-meta-label\">End</span>\r\n            <span className=\"contest-meta-value\">{end.toLocaleString()}</span>\r\n          </div>\r\n          <div>\r\n            <span className=\"contest-meta-label\">Participants</span>\r\n            <span className=\"contest-meta-value\">\r\n              {contest.participants?.length || 0}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Two-column layout: problems + leaderboard */}\r\n      <div className=\"contest-main-grid\">\r\n        {/* Problems + participants */}\r\n        <div className=\"page-card\">\r\n          <h3 className=\"section-title\">Problems</h3>\r\n          {contest.problems.length === 0 ? (\r\n            <p className=\"page-muted\">No problems in this contest yet.</p>\r\n          ) : (\r\n            <ul className=\"contest-problem-list\">\r\n              {contest.problems.map((cp) => (\r\n                <li key={cp.problem._id} className=\"contest-problem-item\">\r\n                  <Link\r\n                    to={`/contests/${contest._id}/problems/${cp.problem.slug}`}\r\n                  >\r\n                    {cp.problem.title}{\" \"}\r\n                    <span className=\"chip chip-small\">\r\n                      {cp.problem.difficulty}\r\n                    </span>\r\n                  </Link>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n\r\n          <h3 className=\"section-title\" style={{ marginTop: \"1.5rem\" }}>\r\n            Participants\r\n          </h3>\r\n          {contest.participants && contest.participants.length > 0 ? (\r\n            <div className=\"participants-list\">\r\n              {contest.participants.map((p) => (\r\n                <span key={p._id} className=\"chip\">\r\n                  {p.username}\r\n                </span>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <p className=\"page-muted\">No participants yet.</p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Leaderboard */}\r\n        <div className=\"page-card leaderboard-card\">\r\n          <div className=\"leaderboard-header\">\r\n            <h3 className=\"section-title\">Leaderboard</h3>\r\n            {loadingLeaderboard && (\r\n              <span className=\"page-muted\" style={{ fontSize: \"0.8rem\" }}>\r\n                refreshing...\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          {leaderboard.length === 0 ? (\r\n            <p className=\"page-muted\">No submissions yet.</p>\r\n          ) : (\r\n            <div className=\"leaderboard-table-wrapper\">\r\n              <table className=\"leaderboard-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Rank</th>\r\n                    <th>User</th>\r\n                    <th>Score</th>\r\n                    <th>Solved</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {leaderboard.map((row, index) => (\r\n                    <tr key={row.userId}>\r\n                      <td>{index + 1}</td>\r\n                      <td>{row.username}</td>\r\n                      <td>{row.score}</td>\r\n                      <td>{row.solvedCount}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat card */}\r\n      <div className=\"page-card contest-chat-card\">\r\n        <div className=\"leaderboard-header\">\r\n          <h3 className=\"section-title\">Contest Chat</h3>\r\n          {!user && (\r\n            <span className=\"page-muted\" style={{ fontSize: \"0.8rem\" }}>\r\n              Login to participate in chat\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {user ? (\r\n          <>\r\n            <div className=\"chat-messages\">\r\n              {loadingChat && chatMessages.length === 0 && (\r\n                <p className=\"page-muted\">Loading chat...</p>\r\n              )}\r\n              {chatMessages.length === 0 && !loadingChat && (\r\n                <p className=\"page-muted\">\r\n                  No messages yet. Be the first to say hi ðŸ‘‹\r\n                </p>\r\n              )}\r\n              {chatMessages.map((msg) => (\r\n                <div key={msg._id} className=\"chat-message\">\r\n                  <span className=\"chat-username\">\r\n                    {msg.user?.username || \"User\"}\r\n                  </span>\r\n                  <span className=\"chat-text\">{msg.message}</span>\r\n                  <span className=\"chat-time\">\r\n                    {new Date(msg.createdAt).toLocaleTimeString()}\r\n                  </span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <form onSubmit={handleSendMessage} className=\"chat-input-row\">\r\n              <input\r\n                type=\"text\"\r\n                value={newMessage}\r\n                onChange={(e) => setNewMessage(e.target.value)}\r\n                className=\"input-control\"\r\n                placeholder=\"Type a message...\"\r\n              />\r\n              <button type=\"submit\" className=\"btn btn-primary\">\r\n                Send\r\n              </button>\r\n            </form>\r\n          </>\r\n        ) : (\r\n          <p className=\"page-muted\">Login to view and send messages.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ContestPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}