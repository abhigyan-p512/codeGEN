{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abhig\\\\OneDrive\\\\Desktop\\\\leetclone\\\\client\\\\src\\\\pages\\\\DuelPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost:5000\";\nfunction DuelPage() {\n  _s();\n  const {\n    user,\n    token\n  } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [status, setStatus] = useState(\"Waiting for opponent...\");\n  const [searching, setSearching] = useState(false);\n  useEffect(() => {\n    if (!user) {\n      navigate(\"/login\", {\n        state: {\n          from: location.pathname,\n          message: \"You must be logged in\"\n        }\n      });\n    }\n  }, [user, navigate, location.pathname]);\n  if (!user) return null;\n  async function findMatch() {\n    setSearching(true);\n    setStatus(\"Searching...\");\n    const interval = setInterval(async () => {\n      try {\n        const res = await axios.post(`${API_URL}/duel/queue`, {}, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (res.data.ready) {\n          clearInterval(interval);\n          navigate(`/duel/${res.data.matchId}`);\n        }\n      } catch (err) {\n        console.log(err);\n        clearInterval(interval);\n        setStatus(\"Error finding opponent\");\n      }\n    }, 2000);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"page-heading\",\n        children: \"1 vs 1 Battle Arena\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"page-subtitle\",\n        children: \"You will be matched with another player and compete on a real problem.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: findMatch,\n        disabled: searching,\n        children: searching ? \"Finding Match...\" : \"Find Opponent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"page-muted\",\n        style: {\n          marginTop: 15\n        },\n        children: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(DuelPage, \"q7RE0gNNs/uxGlPl+1d8fkaE0FY=\", false, function () {\n  return [useAuth, useNavigate, useLocation];\n});\n_c = DuelPage;\nexport default DuelPage;\nvar _c;\n$RefreshReg$(_c, \"DuelPage\");","map":{"version":3,"names":["React","useEffect","useState","axios","useAuth","useNavigate","useLocation","jsxDEV","_jsxDEV","API_URL","DuelPage","_s","user","token","navigate","location","status","setStatus","searching","setSearching","state","from","pathname","message","findMatch","interval","setInterval","res","post","headers","Authorization","data","ready","clearInterval","matchId","err","console","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","style","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/abhig/OneDrive/Desktop/leetclone/client/src/pages/DuelPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\n\r\nconst API_URL = \"http://localhost:5000\";\r\n\r\nfunction DuelPage() {\r\n  const { user, token } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const [status, setStatus] = useState(\"Waiting for opponent...\");\r\n  const [searching, setSearching] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate(\"/login\", {\r\n        state: { from: location.pathname, message: \"You must be logged in\" },\r\n      });\r\n    }\r\n  }, [user, navigate, location.pathname]);\r\n\r\n  if (!user) return null;\r\n\r\n  async function findMatch() {\r\n    setSearching(true);\r\n    setStatus(\"Searching...\");\r\n\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const res = await axios.post(\r\n          `${API_URL}/duel/queue`,\r\n          {},\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n\r\n        if (res.data.ready) {\r\n          clearInterval(interval);\r\n          navigate(`/duel/${res.data.matchId}`);\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n        clearInterval(interval);\r\n        setStatus(\"Error finding opponent\");\r\n      }\r\n    }, 2000);\r\n  }\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      <div className=\"page-card\">\r\n        <h1 className=\"page-heading\">1 vs 1 Battle Arena</h1>\r\n        <p className=\"page-subtitle\">\r\n          You will be matched with another player and compete on a real problem.\r\n        </p>\r\n\r\n        <button className=\"btn btn-primary\" onClick={findMatch} disabled={searching}>\r\n          {searching ? \"Finding Match...\" : \"Find Opponent\"}\r\n        </button>\r\n\r\n        <p className=\"page-muted\" style={{ marginTop: 15 }}>\r\n          {status}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DuelPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}