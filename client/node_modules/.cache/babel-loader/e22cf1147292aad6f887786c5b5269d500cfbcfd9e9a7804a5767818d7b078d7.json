{"ast":null,"code":"// client/src/utils/duelSocket.js\nimport { io } from \"socket.io-client\";\nfunction getSocketUrl() {\n  // If explicitly set, use it\n  if (process.env.REACT_APP_SOCKET_URL) {\n    return process.env.REACT_APP_SOCKET_URL;\n  }\n  // If you already have REACT_APP_API_BASE_URL like \"http://localhost:5000/api\"\n  if (process.env.REACT_APP_API_BASE_URL) {\n    return process.env.REACT_APP_API_BASE_URL.replace(/\\/api\\/?$/, \"\");\n  }\n  // Fallback for local dev\n  return \"http://localhost:5000\";\n}\nconst SOCKET_URL = getSocketUrl();\n\n// Named export – if you ever want to call it manually\nexport function createDuelSocket() {\n  // Read JWT from localStorage (same one you use for API calls)\n  const token = localStorage.getItem(\"token\");\n  return io(SOCKET_URL, {\n    transports: [\"websocket\"],\n    auth: {\n      token\n    }\n  });\n}\n\n// Default export – what DuelRoomPage and Duel.js import as `duelSocket`\nexport default createDuelSocket;","map":{"version":3,"names":["io","getSocketUrl","process","env","REACT_APP_SOCKET_URL","REACT_APP_API_BASE_URL","replace","SOCKET_URL","createDuelSocket","token","localStorage","getItem","transports","auth"],"sources":["C:/Users/abhig/OneDrive/Desktop/leetclone/client/src/utils/duelSocket.js"],"sourcesContent":["// client/src/utils/duelSocket.js\r\nimport { io } from \"socket.io-client\";\r\n\r\nfunction getSocketUrl() {\r\n  // If explicitly set, use it\r\n  if (process.env.REACT_APP_SOCKET_URL) {\r\n    return process.env.REACT_APP_SOCKET_URL;\r\n  }\r\n  // If you already have REACT_APP_API_BASE_URL like \"http://localhost:5000/api\"\r\n  if (process.env.REACT_APP_API_BASE_URL) {\r\n    return process.env.REACT_APP_API_BASE_URL.replace(/\\/api\\/?$/, \"\");\r\n  }\r\n  // Fallback for local dev\r\n  return \"http://localhost:5000\";\r\n}\r\n\r\nconst SOCKET_URL = getSocketUrl();\r\n\r\n// Named export – if you ever want to call it manually\r\nexport function createDuelSocket() {\r\n  // Read JWT from localStorage (same one you use for API calls)\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  return io(SOCKET_URL, {\r\n    transports: [\"websocket\"],\r\n    auth: { token },\r\n  });\r\n}\r\n\r\n// Default export – what DuelRoomPage and Duel.js import as `duelSocket`\r\nexport default createDuelSocket;\r\n"],"mappings":"AAAA;AACA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,SAASC,YAAYA,CAAA,EAAG;EACtB;EACA,IAAIC,OAAO,CAACC,GAAG,CAACC,oBAAoB,EAAE;IACpC,OAAOF,OAAO,CAACC,GAAG,CAACC,oBAAoB;EACzC;EACA;EACA,IAAIF,OAAO,CAACC,GAAG,CAACE,sBAAsB,EAAE;IACtC,OAAOH,OAAO,CAACC,GAAG,CAACE,sBAAsB,CAACC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;EACpE;EACA;EACA,OAAO,uBAAuB;AAChC;AAEA,MAAMC,UAAU,GAAGN,YAAY,CAAC,CAAC;;AAEjC;AACA,OAAO,SAASO,gBAAgBA,CAAA,EAAG;EACjC;EACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAE3C,OAAOX,EAAE,CAACO,UAAU,EAAE;IACpBK,UAAU,EAAE,CAAC,WAAW,CAAC;IACzBC,IAAI,EAAE;MAAEJ;IAAM;EAChB,CAAC,CAAC;AACJ;;AAEA;AACA,eAAeD,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}